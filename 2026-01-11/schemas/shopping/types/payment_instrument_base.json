{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://ucp.dev/schemas/shopping/types/payment_instrument_base.json",
  "title": "Payment Instrument Base",
  "description": "The base definition for any payment instrument. It links the instrument to a specific Merchant configuration (handler_id) and defines common fields like billing address.",
  "type": "object",
  "required": [
    "id",
    "handler_id",
    "type"
  ],
  "properties": {
    "id": {
      "type": "string",
      "description": "A unique identifier for this instrument instance, assigned by the Agent. Used to reference this specific instrument in the 'payment.selected_instrument_id' field."
    },
    "handler_id": {
      "type": "string",
      "description": "The unique identifier for the handler instance that produced this instrument. This corresponds to the 'id' field in the Payment Handler definition."
    },
    "type": {
      "type": "string",
      "description": "The broad category of the instrument (e.g., 'card', 'tokenized_card'). Specific schemas will constrain this to a constant value."
    },
    "billing_address": {
      "$ref": "https://ucp.dev/schemas/shopping/types/postal_address.json",
      "description": "The billing address associated with this payment method."
    },
    "credential": {
      "$ref": "https://ucp.dev/schemas/shopping/types/payment_credential.json"
    }
  }
}