
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="The Universal Commerce Protocol (UCP) is a solution for enabling gen AI agents to make payments on behalf of users, safely, securely, and in a decentralized and privacy protecting manner. This protocol is a part of the broader ecosystem, which includes agentic protocols like A2A and MCP, and encompasses the global nature of payments.
">
      
      
      
        <link rel="canonical" href="https://ucp.dev/draft/playground/">
      
      
        <link rel="prev" href="../documentation/core-concepts/">
      
      
        <link rel="next" href="../specification/overview/">
      
      
        
      
      
      <link rel="icon" href="../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Playground - Universal Commerce Protocol (UCP)</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      
  
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
    
      
      
    
  
  
  <style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M64%20480c-35.3%200-64-28.7-64-64V96c0-35.3%2028.7-64%2064-64h320c35.3%200%2064%2028.7%2064%2064v213.5c0%2017-6.7%2033.3-18.7%2045.3L322.7%20461.3c-12%2012-28.3%2018.7-45.3%2018.7zm325.5-176H296c-13.3%200-24%2010.7-24%2024v93.5z%22/%3E%3C/svg%3E');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M384%20512H96c-53%200-96-43-96-96V96C0%2043%2043%200%2096%200h304c26.5%200%2048%2021.5%2048%2048v288c0%2020.9-13.4%2038.7-32%2045.3V448c17.7%200%2032%2014.3%2032%2032s-14.3%2032-32%2032zM96%20384c-17.7%200-32%2014.3-32%2032s14.3%2032%2032%2032h256v-64zm32-232c0%2013.3%2010.7%2024%2024%2024h176c13.3%200%2024-10.7%2024-24s-10.7-24-24-24H152c-13.3%200-24%2010.7-24%2024m24%2072c-13.3%200-24%2010.7-24%2024s10.7%2024%2024%2024h176c13.3%200%2024-10.7%2024-24s-10.7-24-24-24z%22/%3E%3C/svg%3E');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M256%20512a256%20256%200%201%200%200-512%20256%20256%200%201%200%200%20512m-32-352a32%2032%200%201%201%2064%200%2032%2032%200%201%201-64%200m-8%2064h48c13.3%200%2024%2010.7%2024%2024v88h8c13.3%200%2024%2010.7%2024%2024s-10.7%2024-24%2024h-80c-13.3%200-24-10.7-24-24s10.7-24%2024-24h24v-64h-24c-13.3%200-24-10.7-24-24s10.7-24%2024-24%22/%3E%3C/svg%3E');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M461.2%2018.9C472.7%2024%20480%2035.4%20480%2048v416c0%2012.6-7.3%2024-18.8%2029.1s-24.8%203.2-34.3-5.1l-46.6-40.7c-43.6-38.1-98.7-60.3-156.4-63V480c0%2017.7-14.3%2032-32%2032h-32c-17.7%200-32-14.3-32-32v-96C57.3%20384%200%20326.7%200%20256s57.3-128%20128-128h84.5c61.8-.2%20121.4-22.7%20167.9-63.3L427%2024c9.4-8.3%2022.9-10.2%2034.3-5.1zM224%20320v.2c70.3%202.7%20137.8%2028.5%20192%2073.4V118.3c-54.2%2044.9-121.7%2070.7-192%2073.4z%22/%3E%3C/svg%3E');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M434.8%2070.1c14.3%2010.4%2017.5%2030.4%207.1%2044.7l-256%20352c-5.5%207.6-14%2012.3-23.4%2013.1s-18.5-2.7-25.1-9.3l-128-128c-12.5-12.5-12.5-32.8%200-45.3s32.8-12.5%2045.3%200l101.5%20101.5%20234-321.7c10.4-14.3%2030.4-17.5%2044.7-7.1z%22/%3E%3C/svg%3E');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M256%20512a256%20256%200%201%200%200-512%20256%20256%200%201%200%200%20512m0-336c-17.7%200-32%2014.3-32%2032%200%2013.3-10.7%2024-24%2024s-24-10.7-24-24c0-44.2%2035.8-80%2080-80s80%2035.8%2080%2080c0%2047.2-36%2067.2-56%2074.5v3.8c0%2013.3-10.7%2024-24%2024s-24-10.7-24-24v-8.1c0-20.5%2014.8-35.2%2030.1-40.2%206.4-2.1%2013.2-5.5%2018.2-10.3%204.3-4.2%207.7-10%207.7-19.6%200-17.7-14.3-32-32-32zm-32%20192a32%2032%200%201%201%2064%200%2032%2032%200%201%201-64%200%22/%3E%3C/svg%3E');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M256%200c14.7%200%2028.2%208.1%2035.2%2021l216%20400c6.7%2012.4%206.4%2027.4-.8%2039.5S486.1%20480%20472%20480H40c-14.1%200-27.2-7.4-34.4-19.5s-7.5-27.1-.8-39.5l216-400c7-12.9%2020.5-21%2035.2-21m0%20352a32%2032%200%201%200%200%2064%2032%2032%200%201%200%200-64m0-192c-18.2%200-32.7%2015.5-31.4%2033.7l7.4%20104c.9%2012.5%2011.4%2022.3%2023.9%2022.3%2012.6%200%2023-9.7%2023.9-22.3l7.4-104c1.3-18.2-13.1-33.7-31.4-33.7z%22/%3E%3C/svg%3E');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20576%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M480-16c6.9%200%2013%204.4%2015.2%2010.9l13.5%2040.4%2040.4%2013.5C555.6%2051%20560%2057.1%20560%2064s-4.4%2013-10.9%2015.2l-40.4%2013.5-13.5%2040.4c-2.2%206.5-8.3%2010.9-15.2%2010.9s-13-4.4-15.2-10.9l-13.5-40.4-40.4-13.5C404.4%2077%20400%2070.9%20400%2064s4.4-13%2010.9-15.2l40.4-13.5%2013.5-40.4C467-11.6%20473.1-16%20480-16M321.4%2097.4c12.5-12.5%2032.8-12.5%2045.3%200l80%2080c12.5%2012.5%2012.5%2032.8%200%2045.3l-10.9%2010.9c7.9%2022%2012.2%2045.7%2012.2%2070.5%200%20114.9-93.1%20208-208%20208S32%20418.9%2032%20304%20125.1%2096%20240%2096c24.7%200%2048.5%204.3%2070.5%2012.3zM144%20304c0-53%2043-96%2096-96%2013.3%200%2024-10.7%2024-24s-10.7-24-24-24c-79.5%200-144%2064.5-144%20144%200%2013.3%2010.7%2024%2024%2024s24-10.7%2024-24%22/%3E%3C/svg%3E');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20512%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M416%20427.4c58.5-44%2096-111.6%2096-187.4C512%20107.5%20397.4%200%20256%200S0%20107.5%200%20240c0%2075.8%2037.5%20143.4%2096%20187.4V464c0%2026.5%2021.5%2048%2048%2048h32v-40c0-13.3%2010.7-24%2024-24s24%2010.7%2024%2024v40h64v-40c0-13.3%2010.7-24%2024-24s24%2010.7%2024%2024v40h32c26.5%200%2048-21.5%2048-48zM96%20256a64%2064%200%201%201%20128%200%2064%2064%200%201%201-128%200m256-64a64%2064%200%201%201%200%20128%2064%2064%200%201%201%200-128%22/%3E%3C/svg%3E');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20640%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M352%200c0-17.7-14.3-32-32-32s-32%2014.3-32%2032v64h-96c-53%200-96%2043-96%2096v224c0%2053%2043%2096%2096%2096h256c53%200%2096-43%2096-96V160c0-53-43-96-96-96h-96zM160%20368c0-13.3%2010.7-24%2024-24h32c13.3%200%2024%2010.7%2024%2024s-10.7%2024-24%2024h-32c-13.3%200-24-10.7-24-24m120%200c0-13.3%2010.7-24%2024-24h32c13.3%200%2024%2010.7%2024%2024s-10.7%2024-24%2024h-32c-13.3%200-24-10.7-24-24m120%200c0-13.3%2010.7-24%2024-24h32c13.3%200%2024%2010.7%2024%2024s-10.7%2024-24%2024h-32c-13.3%200-24-10.7-24-24M224%20176a48%2048%200%201%201%200%2096%2048%2048%200%201%201%200-96m144%2048a48%2048%200%201%201%2096%200%2048%2048%200%201%201-96%200m-304%200c0-17.7-14.3-32-32-32S0%20206.3%200%20224v96c0%2017.7%2014.3%2032%2032%2032s32-14.3%2032-32zm544-32c-17.7%200-32%2014.3-32%2032v96c0%2017.7%2014.3%2032%2032%2032s32-14.3%2032-32v-96c0-17.7-14.3-32-32-32%22/%3E%3C/svg%3E');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M288%200H128c-17.7%200-32%2014.3-32%2032s14.3%2032%2032%2032v151.5L7.5%20426.3C2.6%20435%200%20444.7%200%20454.7%200%20486.4%2025.6%20512%2057.3%20512h333.4c31.6%200%2057.3-25.6%2057.3-57.3%200-10-2.6-19.8-7.5-28.4L320%20215.5V64c17.7%200%2032-14.3%2032-32S337.7%200%20320%200zm-96%20215.5V64h64v151.5c0%2011.1%202.9%2022.1%208.4%2031.8L306%20320H142l41.6-72.7c5.5-9.7%208.4-20.6%208.4-31.8%22/%3E%3C/svg%3E');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%20448%20512%22%3E%3C%21--%21%20Font%20Awesome%20Free%207.1.0%20by%20%40fontawesome%20-%20https%3A//fontawesome.com%20License%20-%20https%3A//fontawesome.com/license/free%20%28Icons%3A%20CC%20BY%204.0%2C%20Fonts%3A%20SIL%20OFL%201.1%2C%20Code%3A%20MIT%20License%29%20Copyright%202025%20Fonticons%2C%20Inc.--%3E%3Cpath%20d%3D%22M0%20216C0%20149.7%2053.7%2096%20120%2096h8c17.7%200%2032%2014.3%2032%2032s-14.3%2032-32%2032h-8c-30.9%200-56%2025.1-56%2056v8h64c35.3%200%2064%2028.7%2064%2064v64c0%2035.3-28.7%2064-64%2064H64c-35.3%200-64-28.7-64-64zm256%200c0-66.3%2053.7-120%20120-120h8c17.7%200%2032%2014.3%2032%2032s-14.3%2032-32%2032h-8c-30.9%200-56%2025.1-56%2056v8h64c35.3%200%2064%2028.7%2064%2064v64c0%2035.3-28.7%2064-64%2064h-64c-35.3%200-64-28.7-64-64z%22/%3E%3C/svg%3E');}</style>



    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Google+Sans:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Google Sans";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/custom.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-ZEGTBCTMJ9"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-ZEGTBCTMJ9",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-ZEGTBCTMJ9",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script>
  

    
    
  
<meta property="og:type" content="website" />
<meta property="og:title" content="Playground - Universal Commerce Protocol (UCP)" />
<meta property="og:description" content="The Universal Commerce Protocol (UCP) is a solution for enabling gen AI agents to make payments on behalf of users, safely, securely, and in a decentralized and privacy protecting manner. This protocol is a part of the broader ecosystem, which includes agentic protocols like A2A and MCP, and encompasses the global nature of payments.
" />
<meta property="og:image" content="https://ucp.dev/draft/assets/images/social/playground.png" />
<meta property="og:image:type" content="image/png" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:url" content="https://ucp.dev/draft/playground/" />
<meta property="twitter:card" content="summary_large_image" />
<meta property="twitter:title" content="Playground - Universal Commerce Protocol (UCP)" />
<meta property="twitter:description" content="The Universal Commerce Protocol (UCP) is a solution for enabling gen AI agents to make payments on behalf of users, safely, securely, and in a decentralized and privacy protecting manner. This protocol is a part of the broader ecosystem, which includes agentic protocols like A2A and MCP, and encompasses the global nature of payments.
" />
<meta property="twitter:image" content="https://ucp.dev/draft/assets/images/social/playground.png" />
</head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Universal Commerce Protocol (UCP)" class="md-header__button md-logo" aria-label="Universal Commerce Protocol (UCP)" data-md-component="logo">
      
  <img src="../assets/updated-icon.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Universal Commerce Protocol (UCP)
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Playground
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_0">
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="indigo"  aria-hidden="true"  type="radio" name="__palette" id="__palette_1">
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/Universal-Commerce-Protocol/ucp" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    UCP on GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Universal Commerce Protocol (UCP)" class="md-nav__button md-logo" aria-label="Universal Commerce Protocol (UCP)" data-md-component="logo">
      
  <img src="../assets/updated-icon.svg" alt="logo">

    </a>
    Universal Commerce Protocol (UCP)
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Universal-Commerce-Protocol/ucp" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    UCP on GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/core-concepts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Core Concepts
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Playground
  

    
  </span>
  
  

      </a>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Specification
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Specification
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../specification/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Checkout Capability
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Checkout Capability
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../specification/checkout/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../specification/checkout-rest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    HTTP/REST Binding
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../specification/checkout-mcp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MCP Binding
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../specification/checkout-a2a/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    A2A Binding
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../specification/embedded-checkout/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    EP Binding
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../specification/ap2-mandates/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AP2 Mandates Extension
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../specification/buyer-consent/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Buyer Consent Extension
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../specification/discount/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Discounts Extension
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../specification/fulfillment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fulfillment Extension
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Cart Capability
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Cart Capability
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../specification/cart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../specification/cart-rest/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    HTTP/REST Binding
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../specification/cart-mcp/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MCP Binding
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../specification/order/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Order Capability
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../specification/identity-linking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Identity Linking Capability
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Payment Handlers
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Payment Handlers
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../specification/payment-handler-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../specification/payment-handler-template/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Template
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../specification/tokenization-guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tokenization Guide
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_6_4" >
        
          
          <label class="md-nav__link" for="__nav_4_6_4" id="__nav_4_6_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Examples
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Examples
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../specification/examples/processor-tokenizer-payment-handler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Processor Tokenizer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../specification/examples/platform-tokenizer-payment-handler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Platform Tokenizer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../specification/examples/encrypted-credential-handler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Encrypted Credential
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/schema-authoring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Schema Authoring
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../specification/reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../specification/versioning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Versioning
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/ucp-and-ap2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UCP and AP2
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../documentation/roadmap/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Roadmap
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
                



  


              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<!--
   Copyright 2026 UCP Authors

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
-->

<!-- markdownlint-disable-file MD041 -->

<style>
/* ============================================
   Design System & Reset
   ============================================ */
:root {
  --bg: #ffffff;
  --panel: #f8f9fa;
  --text: #202124;
  --text-secondary: #5f6368;
  --border: #dadce0;
  --accent: #1a73e8;
  --accent-hover: #1557b0;
  --success: #1e8e3e;
  --success-bg: #e6f4ea;
  --error: #d93025;
  --error-bg: #fce8e6;
  --radius: 8px;
  --shadow: 0 1px 2px rgba(60,64,67,0.3), 0 1px 3px 1px rgba(60,64,67,0.15);
  font-family: "Google Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}

* { box-sizing: border-box; }
body { margin: 0; background: var(--bg); color: var(--text); }

/* ============================================
   Stepper
   ============================================ */
.stepper {
  display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 24px;
  background: var(--panel); padding: 8px; border-radius: 50px;
}
.step-btn {
  height: 36px; /* FIXED HEIGHT */
  border: none; background: none; padding: 0 16px; border-radius: 40px;
  color: var(--text-secondary); font-weight: 500; cursor: pointer; transition: 0.2s;
  font-size: 0.85rem;
  display: inline-flex; align-items: center; justify-content: center;
}
.step-btn:hover { color: var(--text); background: rgba(0,0,0,0.05); }
.step-btn.active { background: var(--text); color: #fff; box-shadow: var(--shadow); }
.step-num { opacity: 0.6; margin-right: 8px; font-size: 0.9em; }

/* ============================================
   Components
   ============================================ */
.section { display: none; animation: fadeIn 0.3s ease; }
.section.active { display: block; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

.title { font-size: 1.3rem; margin-bottom: 8px; font-weight: 400; margin-top: 0; }
.desc { color: var(--text-secondary); margin-bottom: 20px; line-height: 1.4; font-size: 0.9rem; }

/* COMPACT GRID LAYOUT */
.grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 16px;
  margin-bottom: 32px;
}
.grid > * { min-width: 0; }

@media (max-width: 600px) { .grid { grid-template-columns: 1fr; } }

.card { border: 1px solid var(--border); border-radius: var(--radius); padding: 16px; background: #fff; height: 100%; }
.card h3 { margin-top: 0; font-size: 1rem; margin-bottom: 12px; }

/* JSON Panels */
.json-panel {
  border: 1px solid var(--border); border-radius: var(--radius);
  background: #fafafa; overflow: hidden; display: flex; flex-direction: column;
  height: 350px;
  flex-shrink: 0;
}
.json-header {
  padding: 0 12px; height: 40px; /* Fixed Header Height */
  background: var(--panel); border-bottom: 1px solid var(--border);
  display: flex;
  justify-content: space-between;
  align-items: center;
  overflow: hidden; /* Prevents layout breakage */
}
.json-title {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  margin-right: 8px; /* Adds space between title and badge */
}
.json-body {
  margin: 0; padding: 12px;
  overflow: auto;
  font-family: "Google Sans Mono", monospace;
  font-size: 11px;
  line-height: 1.5; white-space: pre-wrap; flex: 1;
}

/*
   -----------------------------------
   UNIFIED CONTROLS & BUTTONS
   -----------------------------------
*/
select, input {
  height: 40px; /* MATCH BUTTON HEIGHT */
  width: 100%; padding: 0 12px;
  border: 1px solid var(--border); border-radius: 6px;
  font-size: 0.9rem; margin-top: 4px;
  background: #fff;
}

/* Base Button */
.btn {
  height: 40px; /* FIXED HEIGHT */
  padding: 0 24px;
  border-radius: 50px; border: none; font-weight: 500; cursor: pointer;
  display: inline-flex; align-items: center; justify-content: center;
  gap: 8px; font-size: 0.9rem; transition: 0.2s;
  white-space: nowrap;
}

/* Primary Button */
.btn-primary { background: var(--text); color: white; }
.btn-primary:hover:not(:disabled) { background: #000; }
.btn-primary:disabled { opacity: 0.5; cursor: not-allowed; }

/* Ghost Button (Back) */
.btn-ghost { background: transparent; color: var(--text-secondary); border: 1px solid var(--border); }
.btn-ghost:hover { background: var(--panel); color: var(--text); }

/* Small Button (Inside Headers/Cards) */
.btn-sm {
  height: 32px; /* SMALLER FIXED HEIGHT */
  padding: 0 16px;
  font-size: 0.8rem;
}

.scenario-toolbar {
  display: flex;
  align-items: center;
  gap: 12px;
  background: #f1f3f4;
  padding: 8px 12px;
  border-radius: 8px;
  margin-bottom: 24px;
  width: fit-content;
}

/* Handler Selection */
.handler-opt {
  border: 2px solid var(--border); border-radius: 8px; padding: 12px; cursor: pointer; margin-bottom: 8px;
  transition: 0.2s;
}
.handler-opt:hover { border-color: var(--text-secondary); }
.handler-opt.selected { border-color: var(--accent); background: #f0f7ff; }

/* Utilities */
.hidden { display: none !important; }
.actions { margin-top: 24px; display: flex; gap: 12px; }
.callout { background: var(--success-bg); border: 1px solid var(--success); color: #0d652d; padding: 12px; border-radius: 8px; margin-top: 16px; font-size: 0.9rem; }
.badge { background: #e8f0fe; color: var(--accent); padding: 2px 6px; border-radius: 4px; font-size: 0.7rem; font-weight: 600; text-transform: uppercase; white-space: nowrap; flex-shrink: 0; }
</style>

<div class="container">
  <div class="sectionDescription">
    <h1>UCP Playground</h1>
    <p>Walk through a complete UCP checkout flow step-by-step. This interactive
    demo runs entirely in the browser, simulating payloads and validating
    against real UCP schemas at each stage.</p>
  </div>

  <!-- Stepper Navigation -->
  <div class="stepper" id="stepper"></div>

  <!-- VIEW: Profiles -->
  <div id="view-profiles" class="section active">
    <h2 class="title">1. Platform Profile</h2>
    <p class="desc">Select the capability profile for the Platform. This determines which extensions (e.g., fulfillment, discounts) are negotiated.</p>
    <div class="grid">
      <div class="card">
        <h3>Configuration</h3>
        <label style="font-size: 0.85rem; color: var(--text-secondary); font-weight: 500;">
          Platform Type
          <select id="input-agent-type">
            <option value="basic">Standard (Core Only)</option>
            <option value="full">Advanced (All Extensions)</option>
          </select>
        </label>
        <p id="agent-desc" style="margin-top: 12px; color: var(--text-secondary); font-size: 0.85rem;">
          Supports basic checkout and order retrieval.
        </p>
      </div>
      <div class="json-panel">
        <div class="json-header">
          <span class="json-title">Capabilities</span>
          <button class="btn btn-ghost btn-sm" data-copy="json-profiles">Copy</button>
        </div>
        <pre id="json-profiles" class="json-body"></pre>
      </div>
    </div>
    <div class="actions">
      <button class="btn btn-primary" data-nav="discovery">Continue &rarr;</button>
    </div>
  </div>

  <!-- VIEW: Discovery -->
  <div id="view-discovery" class="section">
    <h2 class="title">2. Discovery</h2>
    <p class="desc">The Platform fetches <code>/.well-known/ucp</code>. The response below is filtered to show the intersection of the Business's capabilities and the Platform's profile.</p>
    <div class="grid">
      <div class="json-panel">
        <div class="json-header"><span class="json-title">GET Request</span></div>
        <pre id="json-disc-req" class="json-body">GET /.well-known/ucp HTTP/1.1
Host: business.example.com
Accept: application/json</pre>
      </div>
      <div class="json-panel">
        <div class="json-header"><span class="json-title">Response (Filtered)</span></div>
        <pre id="json-disc-res" class="json-body"></pre>
      </div>
    </div>
    <div class="actions">
      <button class="btn btn-ghost" data-nav="profiles">&larr; Back</button>
      <button class="btn btn-primary" data-nav="negotiation">Continue &rarr;</button>
    </div>
  </div>

  <!-- VIEW: Negotiation -->
  <div id="view-negotiation" class="section">
    <h2 class="title">3. Capability Negotiation</h2>
    <p class="desc">Intersection of Platform and Business capabilities. Orphaned extensions are pruned.</p>
    <div class="grid">
      <div class="json-panel">
        <div class="json-header"><span class="json-title">Business Capabilities</span></div>
        <pre id="json-neg-biz" class="json-body"></pre>
      </div>
      <div class="json-panel">
        <div class="json-header"><span class="json-title">Resulting Intersection</span></div>
        <pre id="json-neg-active" class="json-body"></pre>
      </div>
    </div>
    <div class="actions">
      <button class="btn btn-ghost" data-nav="discovery">&larr; Back</button>
      <button class="btn btn-primary" data-nav="createCheckout">Continue &rarr;</button>
    </div>
  </div>

  <!-- VIEW: Create Checkout -->
  <div id="view-createCheckout" class="section">
    <h2 class="title">4. Create Checkout</h2>
    <p class="desc">The Platform initiates a session. The error response below follows the strict <code>message.json</code> schema.</p>
    <div class="grid">
      <div class="json-panel">
        <div class="json-header"><span class="json-title">Request Payload</span></div>
        <pre id="json-create-req" class="json-body"></pre>
      </div>
      <div class="json-panel">
        <div class="json-header"><span class="json-title">Response</span></div>
        <pre id="json-create-res" class="json-body"></pre>
      </div>
    </div>
    <!-- MOVED: Scenario Selector to Bottom, Smaller -->
    <div class="scenario-toolbar">
      <span class="scenario-label">Simulation Scenario:</span>
      <select id="input-create-scenario" style="width: 220px; height: 32px; font-size: 0.85rem; margin: 0;">
        <option value="missing_buyer">Missing Buyer Email</option>
        <option value="missing_shipping">Missing Shipping Destination</option>
      </select>
      <button class="btn btn-primary btn-sm" id="btn-run-create">Run Request</button>
    </div>
    <div class="actions">
      <button class="btn btn-ghost" data-nav="negotiation">&larr; Back</button>
      <button class="btn btn-primary" id="nav-to-update" disabled data-nav="updateCheckout">Next Step &rarr;</button>
    </div>
  </div>

  <!-- VIEW: Update Checkout -->
  <div id="view-updateCheckout" class="section">
    <h2 class="title">5. Update Checkout</h2>
    <p class="desc">Patch the checkout with missing information to resolve validation errors.</p>
    <div class="grid">
      <div class="json-panel">
        <div class="json-header">
          <span class="json-title">PATCH Request</span>
          <button class="btn btn-primary btn-sm" id="btn-run-update">Run Update</button>
        </div>
        <pre id="json-update-req" class="json-body"></pre>
      </div>
      <div class="json-panel">
        <div class="json-header"><span class="json-title">Response</span></div>
        <pre id="json-update-res" class="json-body"></pre>
      </div>
    </div>
    <div class="actions">
      <button class="btn btn-ghost" data-nav="createCheckout">&larr; Back</button>
      <button class="btn btn-primary" id="nav-to-mint" disabled data-nav="mintInstrument">Next Step &rarr;</button>
    </div>
  </div>

  <!-- VIEW: Mint Instrument -->
  <div id="view-mintInstrument" class="section">
    <h2 class="title">6. Mint Instrument</h2>
    <p class="desc">Simulate the payment handler flow to acquire a payment credential.</p>
    <div class="grid">
      <div class="card">
        <h3>Select Handler</h3>
        <div class="handler-opt selected" data-handler="shop_pay">
          <strong>Shop Pay</strong><br>
          <small>com.shopify.shop_pay</small>
        </div>
        <div class="handler-opt" data-handler="gpay">
          <strong>Google Pay</strong><br>
          <small>com.google.pay</small>
        </div>
        <button class="btn btn-primary" style="margin-top: 12px; width: 100%;" id="btn-run-mint">Mint Credential</button>
      </div>
      <div class="json-panel">
        <div class="json-header"><span class="json-title">Minted Instrument</span></div>
        <pre id="json-mint-res" class="json-body"></pre>
      </div>
    </div>
    <div class="actions">
      <button class="btn btn-ghost" data-nav="updateCheckout">&larr; Back</button>
      <button class="btn btn-primary" id="nav-to-complete" disabled data-nav="completeCheckout">Next Step &rarr;</button>
    </div>
  </div>

  <!-- VIEW: Complete Checkout -->
  <div id="view-completeCheckout" class="section">
    <h2 class="title">7. Complete Checkout</h2>
    <p class="desc">Submit the minted instrument to finalize the transaction and create an order.</p>
    <div class="grid">
      <div class="json-panel">
        <div class="json-header">
          <span class="json-title">Request</span>
          <button class="btn btn-primary btn-sm" id="btn-run-complete">Finalize</button>
        </div>
        <pre id="json-complete-req" class="json-body"></pre>
      </div>
      <div class="json-panel">
        <div class="json-header"><span class="json-title">Response (Order Created)</span></div>
        <pre id="json-complete-res" class="json-body"></pre>
      </div>
    </div>
    <div class="callout hidden" id="order-success-msg" style="margin-bottom: 24px;">
      <strong>Success!</strong> Order ID: <span id="display-order-id"></span> created.
    </div>
    <div class="actions">
      <button class="btn btn-ghost" data-nav="mintInstrument">&larr; Back</button>
      <button class="btn btn-primary hidden" id="nav-to-webhook" data-nav="webhookSimulation">Next Step &rarr;</button>
    </div>
  </div>

  <!-- VIEW: Webhook Simulation (Step 8) -->
  <div id="view-webhookSimulation" class="section">
    <h2 class="title">8. Webhook Simulation</h2>
    <p class="desc">Simulate a backend event (e.g., shipping center update) triggering a webhook push to the Agent.</p>
    <div class="grid">
      <div class="card">
        <h3>Trigger Event</h3>
        <p style="color:var(--text-secondary); margin-bottom: 12px; font-size: 0.85rem;">This action runs on the Business server and pushes data to the Platform's webhook URL.</p>
        <button class="btn btn-primary" id="btn-run-webhook">Simulate "Shipped" Event</button>
      </div>
      <div class="json-panel">
        <div class="json-header">
          <span class="json-title">Webhook Payload (POST)</span>
          <span class="badge">Push Notification</span>
        </div>
        <pre id="json-webhook-req" class="json-body">// Waiting for event trigger...</pre>
      </div>
    </div>
    <div class="actions">
      <button class="btn btn-ghost" data-nav="completeCheckout">&larr; Back</button>
    </div>
  </div>

  <!-- About callout footer -->
  <div class="callout" style="margin-top: 48px;">
    <div class="calloutTitle">About this demo</div>
    <div class="calloutBody">This playground is a simulation running entirely in your browser. It uses mocked logic to demonstrate the UCP protocol flow and isn't intended as a reference for production code. For real-world implementation examples and best practices, please check out our <a href="https://github.com/Universal-Commerce-Protocol/samples" target="_blank">samples on GitHub</a>.</div>
  </div>

</div>

<script>
(() => {
/**
 * ------------------------------------------------------------------
 * 1. MOCK DATA
 * ------------------------------------------------------------------
 */
const UcpData = {
  version: "2026-01-11",

  inventory: {
    "sku_stickers": { title: "UCP Demo Sticker Pack", price: 599, image_url: "https://example.com/images/stickers.jpg" },
    "sku_mug": { title: "UCP Demo Mug", price: 1999, image_url: "https://example.com/images/mug.jpg" }
  },

  payment_handlers: {
    "com.shopify.shop_pay": [
      {
        id: "shop_pay",
        version: "2026-01-11",
        spec: "https://shopify.dev/docs/agents/checkout/shop-pay-handler",
        config_schema: "https://shopify.dev/ucp/shop-pay-handler/2026-01-11/config.json",
        instrument_schemas: ["https://shopify.dev/ucp/shop-pay-handler/2026-01-11/instrument.json"],
        config: { shop_id: "shopify-559128571" }
      }
    ],
    "com.google.pay": [
      {
        id: "gpay",
        version: "2026-01-11",
        spec: "https://pay.google.com/gp/p/ucp/2026-01-11/",
        config_schema: "https://pay.google.com/gp/p/ucp/2026-01-11/schemas/config.json",
        instrument_schemas: [
          "https://pay.google.com/gp/p/ucp/2026-01-11/schemas/card_payment_instrument.json"
        ],
        config: {
          api_version: 2,
          api_version_minor: 0,
          environment: "TEST",
          merchant_info: {
            merchant_name: "Example Merchant",
            merchant_id: "01234567890123456789",
            merchant_origin: "checkout.merchant.com",
            auth_jwt: "edxsdfoaisjdfapsodjf...."
          },
          allowed_payment_methods: [
            {
              type: "CARD",
              parameters: {
                allowed_auth_methods: ["PAN_ONLY", "CRYPTOGRAM_3DS"],
                allowed_card_networks: ["VISA", "MASTERCARD"]
              },
              tokenization_specification: {
                type: "PAYMENT_GATEWAY",
                parameters: {
                  gateway: "example",
                  gatewayMerchantId: "exampleGatewayMerchantId"
                }
              }
            }
          ]
        }
      }
    ]
  },

  capabilities: {
    "dev.ucp.shopping.checkout": [
      {
        version: "2026-01-23",
        spec: "https://ucp.dev/2026-01-23/specification/checkout",
        schema: "https://ucp.dev/2026-01-23/schemas/shopping/checkout.json"
      }
    ],
    "dev.ucp.shopping.order": [
      {
        version: "2026-01-23",
        spec: "https://ucp.dev/2026-01-23/specification/order",
        schema: "https://ucp.dev/2026-01-23/schemas/shopping/order.json"
      }
    ],
    "dev.ucp.shopping.fulfillment": [
      {
        extends: "dev.ucp.shopping.checkout",
        version: "2026-01-23",
        spec: "https://ucp.dev/2026-01-23/specification/fulfillment",
        schema: "https://ucp.dev/2026-01-23/schemas/shopping/fulfillment.json",
        config: {
          allows_multi_destination: {
            shipping: false,
            pickup: false
          },
          allows_method_combinations: [
            ["shipping"],
            ["pickup"]
          ]
        }
      }
    ],
    "dev.ucp.shopping.discount": [
      {
        extends: "dev.ucp.shopping.checkout",
        version: "2026-01-23",
        spec: "https://ucp.dev/2026-01-23/specification/discount",
        schema: "https://ucp.dev/2026-01-23/schemas/shopping/discount.json"
      }
    ],
    "dev.ucp.shopping.buyer_consent": [
      {
        extends: "dev.ucp.shopping.checkout",
        version: "2026-01-23",
        spec: "https://ucp.dev/2026-01-23/specification/buyer-consent",
        schema: "https://ucp.dev/2026-01-23/schemas/shopping/buyer_consent.json"
      }
    ],
    "dev.ucp.shopping.ap2_mandates": [
      {
        extends: "dev.ucp.shopping.checkout",
        version: "2026-01-23",
        spec: "https://ucp.dev/2026-01-23/specification/ap2-mandates",
        schema: "https://ucp.dev/2026-01-23/schemas/shopping/ap2_mandate.json"
      }
    ]
  },

  agents: {
    basic: {
      label: "Standard",
      description: "Supports core Checkout and Order capabilities.",
      caps: ["dev.ucp.shopping.checkout", "dev.ucp.shopping.order"]
    },
    full: {
      label: "Full",
      description: "Supports core + Fulfillment and Discount extensions.",
      caps: ["dev.ucp.shopping.checkout", "dev.ucp.shopping.order", "dev.ucp.shopping.fulfillment", "dev.ucp.shopping.discount", "dev.ucp.shopping.buyer_consent", "dev.ucp.shopping.ap2_mandates"]
    }
  },

  mock_instruments: {
    shop_pay: {
      "handler_id": "shop_pay_1234",
      "type": "shop_pay",
      "email": "buyer@example.com",
      "id": "instr_sp_1338ef2c-3913-4267-83a2-a84d07d9a6a6"
    },
    gpay: {
      "handler_id": "gpay_1234",
      "type": "card",
      "display": {
        "brand": "visa",
        "last_digits": "4242"
      },
      "billing_address": {
        "street_address": "123 Main Street",
        "extended_address": "Suite 400",
        "address_locality": "Charleston",
        "address_region": "SC",
        "postal_code": "29401",
        "address_country": "US",
        "first_name": "Jane",
        "last_name": "Smith"
      },
      "id": "instr_gp_msg_084a3d56-3491-4b5e-ae3e-b1c45b22fa50"
    }
  }
};

/**
 * ------------------------------------------------------------------
 * 2. BACKEND SIMULATION
 * ------------------------------------------------------------------
 */
class UcpBackend {
  constructor() {
    this.session = null;
    this.currentOrder = null;
  }

  genId(prefix) {
    const r = crypto.randomUUID ? crypto.randomUUID().substring(0, 8) : Math.random().toString(36).substr(2, 9);
    return `${prefix}_${r}`;
  }

  getDiscoveryProfile() {
    return {
      ucp: {
        version: UcpData.version,
        capabilities: UcpData.capabilities,
        payment_handlers: UcpData.payment_handlers
      }
    };
  }

  createCheckout(requestPayload, activeCaps) {
    const lineItems = requestPayload.line_items.map((li, index) => {
      const product = UcpData.inventory[li.item.id];
      const qty = li.quantity || 1;
      const totalAmount = product.price * qty;
      return {
        id: `li_${index + 1}`,
        item: { ...li.item, title: product.title, price: product.price, image_url: product.image_url },
        quantity: qty,
        totals: [{ type: "subtotal", amount: totalAmount }, { type: "total", amount: totalAmount }]
      };
    });

    const subtotal = lineItems.reduce((acc, li) => acc + li.totals.find(t=>t.type==='total').amount, 0);

    const messages = [];
    const isFullAgent = Object.keys(activeCaps).some(name => name.includes("fulfillment"));

    if (!requestPayload.buyer?.email) {
      messages.push({
        type: "error",
        code: "missing",
        path: "$.buyer.email",
        severity: "requires_buyer_input",
        content: "Buyer email is required for checkout."
      });
    }

    if (isFullAgent) {
      const hasShipping = requestPayload.fulfillment?.methods?.some(m => m.type === 'shipping' && m.destinations?.length > 0);
      if (!hasShipping && requestPayload.fulfillment) {
         messages.push({
          type: "error",
          code: "missing",
          path: "$.fulfillment.methods[0].destinations",
          severity: "requires_buyer_input",
          content: "Shipping destination is missing."
        });
      }
    }

    this.session = {
      ucp: { version: UcpData.version, capabilities: activeCaps, payment_handlers: UcpData.payment_handlers },
      id: this.genId('chk'),
      status: messages.length > 0 ? "incomplete" : "ready_for_complete",
      line_items: lineItems,
      currency: "USD",
      totals: [{ type: "subtotal", amount: subtotal }, { type: "total", amount: subtotal }],
      messages: messages
    };

    return this.session;
  }

  updateCheckout(patchPayload) {
    if (!this.session) throw new Error("Session not found");

    if (patchPayload.buyer) {
      this.session.buyer = { ...this.session.buyer, ...patchPayload.buyer };
    }

    if (patchPayload.fulfillment) {
      this.session.fulfillment = { ...this.session.fulfillment, ...patchPayload.fulfillment };

      const methods = this.session.fulfillment.methods || [];
      const hasValidDest = methods.some(m => m.destinations && m.destinations.length > 0);

      if (hasValidDest) {
        const shippingCost = 500;
        this.session.totals = this.session.totals.filter(t => t.type !== 'fulfillment');
        this.session.totals.push({ type: "fulfillment", amount: shippingCost, display_text: "Standard Shipping" });

        const sub = this.session.totals.find(t => t.type === 'subtotal')?.amount || 0;
        const totalObj = this.session.totals.find(t => t.type === 'total');
        if (totalObj) totalObj.amount = sub + shippingCost;
      }
    }

    const newMessages = [];
    if (!this.session.buyer?.email) {
      newMessages.push({
        type: "error", code: "missing", path: "$.buyer.email", severity: "requires_buyer_input", content: "Buyer email is required."
      });
    }

    const isFullAgent = Object.keys(this.session.ucp.capabilities).some(name => name.includes("fulfillment"));
    if(isFullAgent) {
        const hasDest = this.session.fulfillment?.methods?.[0]?.destinations?.length > 0;
        if(!hasDest && this.session.fulfillment) {
            newMessages.push({
                type: "error", code: "missing", path: "$.fulfillment.methods[0].destinations", severity: "requires_buyer_input", content: "Shipping destination required."
            });
        }
    }

    this.session.messages = newMessages;
    this.session.status = newMessages.length > 0 ? "incomplete" : "ready_for_complete";

    return this.session;
  }

  completeCheckout(paymentInstrument) {
    if (!this.session) throw new Error("Session expired");

    const orderId = this.genId('ord');

    const orderLineItems = this.session.line_items.map(li => ({
        id: li.id,
        item: li.item,
        quantity: {
            total: li.quantity,
            fulfilled: 0
        },
        totals: li.totals,
        status: "processing"
    }));

    let fulfillmentObj = {};
    const method = this.session.fulfillment?.methods?.[0];

    if (method && method.type === 'shipping' && method.destinations?.[0]) {
        fulfillmentObj = {
            expectations: [{
                id: this.genId('exp'),
                line_items: orderLineItems.map(li => ({ id: li.id, quantity: li.quantity.total })),
                method_type: "shipping",
                destination: method.destinations[0],
                description: "Standard Shipping (Arrives in 3-5 days)",
                fulfillable_on: new Date().toISOString()
            }],
            events: []
        };
    }

    const order = {
      ucp: {
          version: UcpData.version,
          capabilities: this.session.ucp.capabilities
      },
      id: orderId,
      checkout_id: this.session.id,
      permalink_url: `https://example-merchant.com/orders/${orderId}`,
      line_items: orderLineItems,
      fulfillment: fulfillmentObj,
      adjustments: [],
      totals: this.session.totals
    };

    this.session.status = "completed";
    this.currentOrder = order;
    return order;
  }

  triggerDeliveryWebhook() {
    if (!this.currentOrder) throw new Error("No active order found.");

    const order = this.currentOrder;
    const eventId = this.genId("evt");
    const eventTime = new Date().toISOString();

    const eventLineItems = order.line_items.map(li => ({
        id: li.id,
        quantity: li.quantity.total
    }));

    const newEvent = {
        id: eventId,
        occurred_at: eventTime,
        type: "shipped",
        line_items: eventLineItems,
        tracking_number: "1Z999AA10123456784",
        tracking_url: "https://example-carrier.com/track/1Z999AA10123456784",
        carrier: "Mock Express",
        description: "Package handed over to carrier."
    };

    if (!order.fulfillment) order.fulfillment = { events: [], expectations: [] };
    if (!order.fulfillment.events) order.fulfillment.events = [];
    order.fulfillment.events.push(newEvent);

    order.line_items.forEach(li => {
        li.quantity.fulfilled = li.quantity.total;
        li.status = "fulfilled";
    });

    const webhookPayload = {
        ...order,
        event_id: eventId,
        created_time: eventTime
    };

    return webhookPayload;
  }
}

/**
 * ------------------------------------------------------------------
 * 3. FRONTEND CONTROLLER
 * ------------------------------------------------------------------
 */
class UcpApp {
  constructor() {
    this.backend = new UcpBackend();
    this.state = {
      step: 'profiles',
      agent: 'basic',
      activeCaps: [],
      scenario: 'missing_buyer',
      selectedHandler: 'shop_pay',
      lastRequests: {}
    };

    // Added 'webhookSimulation' as the official 8th step
    this.steps = [
      'profiles', 'discovery', 'negotiation',
      'createCheckout', 'updateCheckout',
      'mintInstrument', 'completeCheckout', 'webhookSimulation'
    ];
    this.init();
  }

  init() {
    this.renderStepper();
    this.bindEvents();
    this.updateProfilesView();
  }

  renderStepper() {
    const container = document.getElementById('stepper');
    container.innerHTML = this.steps.map((s, i) => `
      <button class="step-btn ${s === this.state.step ? 'active' : ''}" data-step="${s}">
        <span class="step-num">${i + 1}</span> ${s.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase())}
      </button>
    `).join('');
  }

  setJson(elementId, data) {
    document.getElementById(elementId).textContent = JSON.stringify(data, null, 2);
  }

  navigateTo(stepName) {
    this.state.step = stepName;
    document.querySelectorAll('.section').forEach(el => el.classList.remove('active'));
    document.getElementById(`view-${stepName}`).classList.add('active');
    document.querySelectorAll('.step-btn').forEach(b => {
      b.classList.toggle('active', b.dataset.step === stepName);
    });

    if (stepName === 'profiles') this.updateProfilesView();
    if (stepName === 'discovery') this.runDiscovery();
    if (stepName === 'negotiation') this.runNegotiation();
    if (stepName === 'createCheckout') this.prepareCreatePayload();
  }

  updateProfilesView() {
    const type = this.state.agent;
    const profile = UcpData.agents[type];

    document.getElementById('agent-desc').textContent = profile.description;

    const capabilities = {};
    profile.caps.forEach(name => {
      if (UcpData.capabilities[name]) {
        capabilities[name] = UcpData.capabilities[name];
      }
    });

    this.setJson('json-profiles', { ucp: { version: UcpData.version, capabilities, payment_handlers: UcpData.payment_handlers } });
  }

  runDiscovery() {
    const fullProfile = this.backend.getDiscoveryProfile();
    const agentCapNames = UcpData.agents[this.state.agent].caps;

    const filteredCaps = {};
    agentCapNames.forEach(name => {
      if (fullProfile.ucp.capabilities[name]) {
        filteredCaps[name] = fullProfile.ucp.capabilities[name];
      }
    });

    const displayProfile = {
      ...fullProfile,
      ucp: { ...fullProfile.ucp, capabilities: filteredCaps, payment_handlers: fullProfile.ucp.payment_handlers }
    };

    this.setJson('json-disc-res', displayProfile);
  }

  runNegotiation() {
    const bizProfile = this.backend.getDiscoveryProfile();
    this.setJson('json-neg-biz', bizProfile.ucp.capabilities);

    const agentCapsNames = UcpData.agents[this.state.agent].caps;
    const active = {};
    agentCapsNames.forEach(name => {
      if (bizProfile.ucp.capabilities[name]) {
        active[name] = bizProfile.ucp.capabilities[name];
      }
    });
    this.state.activeCaps = active;

    this.setJson('json-neg-active', active);
  }

  prepareCreatePayload() {
    const scenarioSelect = document.getElementById('input-create-scenario');
    const isFull = this.state.agent === 'full';
    scenarioSelect.innerHTML = `
      <option value="missing_buyer">Missing Buyer Email</option>
      ${isFull ? '<option value="missing_shipping">Missing Shipping Destination</option>' : ''}
    `;
    if (!isFull && this.state.scenario === 'missing_shipping') {
        this.state.scenario = 'missing_buyer';
        scenarioSelect.value = 'missing_buyer';
    } else {
        scenarioSelect.value = this.state.scenario;
    }

    const payload = {
      line_items: [{ item: { id: "sku_stickers" }, quantity: 2 }, { item: { id: "sku_mug" }, quantity: 1 }],
      buyer: {},
      payment: { instruments: [UcpData.mock_instruments.shop_pay] }
    };

    if (Object.keys(this.state.activeCaps).some(name => name.includes('fulfillment'))) {
        payload.fulfillment = { methods: [] };
    }

    this.state.lastRequests.create = payload;
    this.setJson('json-create-req', payload);
    this.setJson('json-create-res', { hint: "Click 'Run Request' to send..." });
    document.getElementById('nav-to-update').disabled = true;
  }

  executeCreateCheckout() {
    const req = JSON.parse(JSON.stringify(this.state.lastRequests.create));
    const scenario = this.state.scenario;

    if (scenario === 'missing_buyer') {
        delete req.buyer.email;
    } else {
        req.buyer.email = "test@example.com";
        req.buyer.name = "Test User";
    }

    if (scenario === 'missing_shipping' || req.fulfillment) {
        if (!req.fulfillment) {
            req.fulfillment = { methods: [] };
        }
        if (scenario === 'missing_shipping') {
            req.fulfillment.methods = [{ type: 'shipping', destinations: [] }];
            req.buyer.email = "test@example.com";
            req.buyer.name = "Test User";
        } else {
            req.fulfillment.methods = [{ type: 'shipping', destinations: [{ id: "addr_1", street: "123 Main St", city: "Tech City", country: "US", postal_code: "94103" }] }];
        }
    }

    this.setJson('json-create-req', req);
    try {
      const res = this.backend.createCheckout(req, this.state.activeCaps);
      this.setJson('json-create-res', res);
      document.getElementById('nav-to-update').disabled = false;
      this.prepareUpdatePayload(res);
    } catch (e) {
      this.setJson('json-create-res', { error: e.message });
    }
  }

  prepareUpdatePayload(checkoutResponse) {
    const patch = { id: checkoutResponse.id };
    const errors = checkoutResponse.messages || [];

    if (errors.some(e => e.path === "$.buyer.email")) {
      patch.buyer = { email: "fixed_user@example.com", name: "Fixed User" };
    }

    if (errors.some(e => e.path.includes('destinations'))) {
      patch.fulfillment = {
        methods: [{
            type: "shipping",
            destinations: [{ id: "addr_1", street: "123 Main St", city: "Tech City", country: "US", postal_code: "94103" }]
        }]
      };
    }

    this.state.lastRequests.update = patch;
    this.setJson('json-update-req', patch);
    this.setJson('json-update-res', { hint: "Click 'Run Update'..." });
    document.getElementById('nav-to-mint').disabled = true;
  }

  executeUpdateCheckout() {
    try {
      const res = this.backend.updateCheckout(this.state.lastRequests.update);
      this.setJson('json-update-res', res);

      if(res.status === 'ready_for_complete') {
        document.getElementById('nav-to-mint').disabled = false;
      }
    } catch (e) {
      this.setJson('json-update-res', { error: e.message });
    }
  }

  executeMint() {
    const handlerId = this.state.selectedHandler;
    const baseInstrument = UcpData.mock_instruments[handlerId];
    const instrument = JSON.parse(JSON.stringify(baseInstrument));

    const tokenStr = crypto.randomUUID ? crypto.randomUUID() : Math.random().toString(36).substring(2);

    if (handlerId === 'gpay') {
      instrument.credential = { type: "PAYMENT_GATEWAY", token: "gpaytok_" + tokenStr };
    } else if (handlerId === 'shop_pay') {
      instrument.credential = { type: "ShopPayToken", token: "shoppay_tok_" + tokenStr };
    }

    instrument.selected = true;

    this.state.lastRequests.instrument = instrument;
    this.setJson('json-mint-res', instrument);
    document.getElementById('nav-to-complete').disabled = false;
    this.setJson('json-complete-req', { payment: instrument });
  }

  executeComplete() {
    try {
      const res = this.backend.completeCheckout(this.state.lastRequests.instrument);
      this.setJson('json-complete-res', res);
      document.getElementById('display-order-id').textContent = res.id;
      document.getElementById('order-success-msg').classList.remove('hidden');

      // Reveal link to next step
      document.getElementById('nav-to-webhook').classList.remove('hidden');
    } catch (e) {
      this.setJson('json-complete-res', { error: e.message });
    }
  }

  executeWebhook() {
    try {
      const payload = this.backend.triggerDeliveryWebhook();
      this.setJson('json-webhook-req', payload);
    } catch(e) {
      this.setJson('json-webhook-req', { error: e.message });
    }
  }

  bindEvents() {
    document.getElementById('input-agent-type').addEventListener('change', (e) => {
      this.state.agent = e.target.value;
      this.updateProfilesView();
    });

    document.getElementById('input-create-scenario').addEventListener('change', (e) => {
      this.state.scenario = e.target.value;
    });

    document.body.addEventListener('click', (e) => {
      const navTarget = e.target.closest('[data-nav]');
      if (navTarget && !navTarget.disabled) this.navigateTo(navTarget.dataset.nav);

      const stepTarget = e.target.closest('[data-step]');
      if (stepTarget) this.navigateTo(stepTarget.dataset.step);

      const copyTarget = e.target.closest('[data-copy]');
      if (copyTarget) {
         navigator.clipboard.writeText(document.getElementById(copyTarget.dataset.copy).textContent);
      }
    });

    document.getElementById('btn-run-create').addEventListener('click', () => this.executeCreateCheckout());
    document.getElementById('btn-run-update').addEventListener('click', () => this.executeUpdateCheckout());
    document.getElementById('btn-run-mint').addEventListener('click', () => this.executeMint());
    document.getElementById('btn-run-complete').addEventListener('click', () => this.executeComplete());
    document.getElementById('btn-run-webhook').addEventListener('click', () => this.executeWebhook());

    document.querySelectorAll('.handler-opt').forEach(el => {
      el.addEventListener('click', () => {
        document.querySelectorAll('.handler-opt').forEach(x => x.classList.remove('selected'));
        el.classList.add('selected');
        this.state.selectedHandler = el.dataset.handler;
      });
    });
  }
}

function startUcpPlayground() {
  if (document.getElementById('stepper')) {
    new UcpApp();
  }
}

if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', startUcpPlayground);
} else {
  startUcpPlayground();
}

window.addEventListener('popstate', startUcpPlayground);
})();
</script>









  




                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../documentation/core-concepts/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Core Concepts">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Core Concepts
              </div>
            </div>
          </a>
        
        
          
          <a href="../specification/overview/" class="md-footer__link md-footer__link--next" aria-label="Next: Overview">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Overview
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright 2026 UCP Authors. Licensed under the <a href="https://github.com/Universal-Commerce-Protocol/ucp/blob/main/LICENSE">Apache License, Version 2.0</a>.
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            


  


<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
    
      
        
  
  
    
    
  
  <li class="task-list-item">
    <label class="task-list-control">
      <input type="checkbox" name="analytics" checked>
      <span class="task-list-indicator"></span>
      Google Analytics
    </label>
  </li>

      
    
    
      
        
  
  
    
    
  
  <li class="task-list-item">
    <label class="task-list-control">
      <input type="checkbox" name="github" checked>
      <span class="task-list-indicator"></span>
      GitHub
    </label>
  </li>

      
    
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script>
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["announce.dismiss", "content.code.annotate", "content.code.copy", "content.code.select", "content.tabs.link", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.instant", "navigation.instant.progress", "navigation.path", "navigation.top", "navigation.tracking", "toc.follow"], "search": "../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>